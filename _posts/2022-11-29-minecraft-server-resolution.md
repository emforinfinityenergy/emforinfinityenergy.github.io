---
layout: post
title: 我的Minecraft服务器远控方案
author: EM
date: 2022-11-29 
categories: 记事
tags: [技术]
---


换电脑之后，老是想用原来的电脑整点活...

## 背景

换电脑之后原来的电脑就闲置下来，碰巧lty让我开一个**MC服务器**，于是我便用我的旧电脑搭了一台服务器，在远控和公网访问上出了点问题。

## 方案一

我绝对是要**薅羊毛**的，所以我使用了*SakuraFrp*，以内网穿透的方式来解决公网访问。然后就是**远程控制**，毕竟要是看服务器控制台还要在我的老电脑面前捣鼓，那就**太不优雅了**。第一次我选用了**rcon**。这是一个MC服务器内置的远端控制模块，但是只能发送命令，并不能读取log~~至少我没找到~~。但是我当时并没有想到更好的解决方法，因此便不再寻找，我直接写了个python脚本读取内网中电脑的`latest.log`文件并输出到终端，这样就能在我家的内网里实现远程控制，就像下面这样（红黄色是隧道，绿色是log传输，我的新电脑是EM-III，旧的是EM）：

![](https://files.catbox.moe/gew4bf.png)

因为*SakuraFrp*免费版**只支持2条隧道**，所以我没有办法为log单独建隧道，因此只能妥协。

## 方案二

有一次服炸了，结果我**人在外面动不了服**，超级尴尬。因此我就觉得现在这个远控方案太傻逼，就寻找其它方案。这个时候，我就想到了**SSH**（SSH是什么右转[这里](https://baike.baidu.com/item/ssh/10407?fr=aladdin)）。但是SSH并不能获取到已经运行的控制台~~（或者是我太loser）~~，或者是在远端启动服务器后，**远端关闭服务器也会关闭**（这不就是相当于服在我电脑上吗）。因此我就把目光投向了*MCSManager面板*，这个面板完全免费，非常良心。而且部署在两个端口上之后就能用，我只需要想办法把它穿透到公网上就ok了。然而，*MCSManager*是**必须有一个容器装着服务器运行的**，而这容器**也必须穿透到公网上**，不然就只能访问面板而不能进行操作。这个时候就是**SSH出场之时**，SSH建立之后，**可以进行端口转发**。因此，我们就可以把*MCSManager*部署的端口转发到本地的端口上然后进行访问，**整个过程只需要穿透一个SSH端口**！这样，我们仍然维持了2个隧道的数量，但是却**增加了功能和改良了体验**！不仅如此，连接上SSH之后，**还可以通过[SFTP](https://baike.baidu.com/item/SSH%E6%96%87%E4%BB%B6%E4%BC%A0%E8%BE%93%E5%8D%8F%E8%AE%AE/2974699?fromtitle=SFTP&fromid=1184182&fr=aladdin)传递文件**，简直完美！因此，我的方案就变成了这样（棕色是内网数据传递通道，隧道的用途标在了隧道旁，绿色连接的是搭建的东西）:

![](https://files.catbox.moe/x6nzs4.png)



$$Thanks\space for \space reading.$$

$$EOF$$